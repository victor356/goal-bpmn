{"ast":null,"code":"import { getBBox } from '../../util/Elements';\nvar LOW_PRIORITY = 500;\nimport { append as svgAppend, attr as svgAttr, create as svgCreate } from 'tiny-svg';\nimport { query as domQuery } from 'min-dom';\nimport { assign } from 'min-dash';\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} eventBus\n * @param {Styles} styles\n * @param {ElementRegistry} elementRegistry\n */\n\nexport default function Outline(eventBus, styles, elementRegistry) {\n  this.offset = 6;\n  var OUTLINE_STYLE = styles.cls('djs-outline', ['no-fill']);\n  var self = this;\n\n  function createOutline(gfx, bounds) {\n    var outline = svgCreate('rect');\n    svgAttr(outline, assign({\n      x: 10,\n      y: 10,\n      width: 100,\n      height: 100\n    }, OUTLINE_STYLE));\n    svgAppend(gfx, outline);\n    return outline;\n  } // A low priortity is necessary, because outlines of labels have to be updated\n  // after the label bounds have been updated in the renderer.\n\n\n  eventBus.on(['shape.added', 'shape.changed'], LOW_PRIORITY, function (event) {\n    var element = event.element,\n        gfx = event.gfx;\n    var outline = domQuery('.djs-outline', gfx);\n\n    if (!outline) {\n      outline = createOutline(gfx, element);\n    }\n\n    self.updateShapeOutline(outline, element);\n  });\n  eventBus.on(['connection.added', 'connection.changed'], function (event) {\n    var element = event.element,\n        gfx = event.gfx;\n    var outline = domQuery('.djs-outline', gfx);\n\n    if (!outline) {\n      outline = createOutline(gfx, element);\n    }\n\n    self.updateConnectionOutline(outline, element);\n  });\n}\n/**\n * Updates the outline of a shape respecting the dimension of the\n * element and an outline offset.\n *\n * @param  {SVGElement} outline\n * @param  {djs.model.Base} element\n */\n\nOutline.prototype.updateShapeOutline = function (outline, element) {\n  svgAttr(outline, {\n    x: -this.offset,\n    y: -this.offset,\n    width: element.width + this.offset * 2,\n    height: element.height + this.offset * 2\n  });\n};\n/**\n * Updates the outline of a connection respecting the bounding box of\n * the connection and an outline offset.\n *\n * @param  {SVGElement} outline\n * @param  {djs.model.Base} element\n */\n\n\nOutline.prototype.updateConnectionOutline = function (outline, connection) {\n  var bbox = getBBox(connection);\n  svgAttr(outline, {\n    x: bbox.x - this.offset,\n    y: bbox.y - this.offset,\n    width: bbox.width + this.offset * 2,\n    height: bbox.height + this.offset * 2\n  });\n};\n\nOutline.$inject = ['eventBus', 'styles', 'elementRegistry'];","map":{"version":3,"sources":["C:/Users/Vittorio/Documents/GitHub/SPM2021-MTV/frontend/node_modules/bpmn-js/node_modules/diagram-js/lib/features/outline/Outline.js"],"names":["getBBox","LOW_PRIORITY","append","svgAppend","attr","svgAttr","create","svgCreate","query","domQuery","assign","Outline","eventBus","styles","elementRegistry","offset","OUTLINE_STYLE","cls","self","createOutline","gfx","bounds","outline","x","y","width","height","on","event","element","updateShapeOutline","updateConnectionOutline","prototype","connection","bbox","$inject"],"mappings":"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","sourcesContent":["import { getBBox } from '../../util/Elements';\n\nvar LOW_PRIORITY = 500;\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  assign\n} from 'min-dash';\n\n\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} eventBus\n * @param {Styles} styles\n * @param {ElementRegistry} elementRegistry\n */\nexport default function Outline(eventBus, styles, elementRegistry) {\n\n  this.offset = 6;\n\n  var OUTLINE_STYLE = styles.cls('djs-outline', [ 'no-fill' ]);\n\n  var self = this;\n\n  function createOutline(gfx, bounds) {\n    var outline = svgCreate('rect');\n\n    svgAttr(outline, assign({\n      x: 10,\n      y: 10,\n      width: 100,\n      height: 100\n    }, OUTLINE_STYLE));\n\n    svgAppend(gfx, outline);\n\n    return outline;\n  }\n\n  // A low priortity is necessary, because outlines of labels have to be updated\n  // after the label bounds have been updated in the renderer.\n  eventBus.on([ 'shape.added', 'shape.changed' ], LOW_PRIORITY, function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    var outline = domQuery('.djs-outline', gfx);\n\n    if (!outline) {\n      outline = createOutline(gfx, element);\n    }\n\n    self.updateShapeOutline(outline, element);\n  });\n\n  eventBus.on([ 'connection.added', 'connection.changed' ], function(event) {\n    var element = event.element,\n        gfx = event.gfx;\n\n    var outline = domQuery('.djs-outline', gfx);\n\n    if (!outline) {\n      outline = createOutline(gfx, element);\n    }\n\n    self.updateConnectionOutline(outline, element);\n  });\n}\n\n\n/**\n * Updates the outline of a shape respecting the dimension of the\n * element and an outline offset.\n *\n * @param  {SVGElement} outline\n * @param  {djs.model.Base} element\n */\nOutline.prototype.updateShapeOutline = function(outline, element) {\n\n  svgAttr(outline, {\n    x: -this.offset,\n    y: -this.offset,\n    width: element.width + this.offset * 2,\n    height: element.height + this.offset * 2\n  });\n\n};\n\n\n/**\n * Updates the outline of a connection respecting the bounding box of\n * the connection and an outline offset.\n *\n * @param  {SVGElement} outline\n * @param  {djs.model.Base} element\n */\nOutline.prototype.updateConnectionOutline = function(outline, connection) {\n\n  var bbox = getBBox(connection);\n\n  svgAttr(outline, {\n    x: bbox.x - this.offset,\n    y: bbox.y - this.offset,\n    width: bbox.width + this.offset * 2,\n    height: bbox.height + this.offset * 2\n  });\n\n};\n\n\nOutline.$inject = ['eventBus', 'styles', 'elementRegistry'];"]},"metadata":{},"sourceType":"module"}