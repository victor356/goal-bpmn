{"ast":null,"code":"import { values } from 'min-dash';\nimport { getEnclosedElements } from '../../util/Elements';\nimport { hasSecondaryModifier } from '../../util/Mouse';\nimport { append as svgAppend, attr as svgAttr, create as svgCreate, remove as svgRemove } from 'tiny-svg';\nvar LASSO_TOOL_CURSOR = 'crosshair';\nexport default function LassoTool(eventBus, canvas, dragging, elementRegistry, selection, toolManager) {\n  this._selection = selection;\n  this._dragging = dragging;\n  var self = this; // lasso visuals implementation\n\n  /**\n  * A helper that realizes the selection box visual\n  */\n\n  var visuals = {\n    create: function (context) {\n      var container = canvas.getDefaultLayer(),\n          frame;\n      frame = context.frame = svgCreate('rect');\n      svgAttr(frame, {\n        class: 'djs-lasso-overlay',\n        width: 1,\n        height: 1,\n        x: 0,\n        y: 0\n      });\n      svgAppend(container, frame);\n    },\n    update: function (context) {\n      var frame = context.frame,\n          bbox = context.bbox;\n      svgAttr(frame, {\n        x: bbox.x,\n        y: bbox.y,\n        width: bbox.width,\n        height: bbox.height\n      });\n    },\n    remove: function (context) {\n      if (context.frame) {\n        svgRemove(context.frame);\n      }\n    }\n  };\n  toolManager.registerTool('lasso', {\n    tool: 'lasso.selection',\n    dragging: 'lasso'\n  });\n  eventBus.on('lasso.selection.end', function (event) {\n    var target = event.originalEvent.target; // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return;\n    }\n\n    eventBus.once('lasso.selection.ended', function () {\n      self.activateLasso(event.originalEvent, true);\n    });\n  }); // lasso interaction implementation\n\n  eventBus.on('lasso.end', function (event) {\n    var bbox = toBBox(event);\n    var elements = elementRegistry.filter(function (element) {\n      return element;\n    });\n    self.select(elements, bbox);\n  });\n  eventBus.on('lasso.start', function (event) {\n    var context = event.context;\n    context.bbox = toBBox(event);\n    visuals.create(context);\n  });\n  eventBus.on('lasso.move', function (event) {\n    var context = event.context;\n    context.bbox = toBBox(event);\n    visuals.update(context);\n  });\n  eventBus.on('lasso.cleanup', function (event) {\n    var context = event.context;\n    visuals.remove(context);\n  }); // event integration\n\n  eventBus.on('element.mousedown', 1500, function (event) {\n    if (hasSecondaryModifier(event)) {\n      self.activateLasso(event.originalEvent); // we've handled the event\n\n      return true;\n    }\n  });\n}\nLassoTool.$inject = ['eventBus', 'canvas', 'dragging', 'elementRegistry', 'selection', 'toolManager'];\n\nLassoTool.prototype.activateLasso = function (event, autoActivate) {\n  this._dragging.init(event, 'lasso', {\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\nLassoTool.prototype.activateSelection = function (event) {\n  this._dragging.init(event, 'lasso.selection', {\n    trapClick: false,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\nLassoTool.prototype.select = function (elements, bbox) {\n  var selectedElements = getEnclosedElements(elements, bbox);\n\n  this._selection.select(values(selectedElements));\n};\n\nLassoTool.prototype.toggle = function () {\n  if (this.isActive()) {\n    this._dragging.cancel();\n  } else {\n    this.activateSelection();\n  }\n};\n\nLassoTool.prototype.isActive = function () {\n  var context = this._dragging.context();\n\n  return context && /^lasso/.test(context.prefix);\n};\n\nfunction toBBox(event) {\n  var start = {\n    x: event.x - event.dx,\n    y: event.y - event.dy\n  };\n  var end = {\n    x: event.x,\n    y: event.y\n  };\n  var bbox;\n\n  if (start.x <= end.x && start.y < end.y || start.x < end.x && start.y <= end.y) {\n    bbox = {\n      x: start.x,\n      y: start.y,\n      width: end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y < end.y || start.x > end.x && start.y <= end.y) {\n    bbox = {\n      x: end.x,\n      y: start.y,\n      width: start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if (start.x <= end.x && start.y > end.y || start.x < end.x && start.y >= end.y) {\n    bbox = {\n      x: start.x,\n      y: end.y,\n      width: end.x - start.x,\n      height: start.y - end.y\n    };\n  } else if (start.x >= end.x && start.y > end.y || start.x > end.x && start.y >= end.y) {\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width: start.x - end.x,\n      height: start.y - end.y\n    };\n  } else {\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width: 0,\n      height: 0\n    };\n  }\n\n  return bbox;\n}","map":{"version":3,"sources":["C:/Users/Vittorio/Documents/GitHub/goal-bpmn/frontend/node_modules/diagram-js/lib/features/lasso-tool/LassoTool.js"],"names":["values","getEnclosedElements","hasSecondaryModifier","append","svgAppend","attr","svgAttr","create","svgCreate","remove","svgRemove","LASSO_TOOL_CURSOR","LassoTool","eventBus","canvas","dragging","elementRegistry","selection","toolManager","_selection","_dragging","self","visuals","context","container","getDefaultLayer","frame","class","width","height","x","y","update","bbox","registerTool","tool","on","event","target","originalEvent","hover","SVGElement","once","activateLasso","toBBox","elements","filter","element","select","$inject","prototype","autoActivate","init","cursor","data","activateSelection","trapClick","selectedElements","toggle","isActive","cancel","test","prefix","start","dx","dy","end"],"mappings":"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","sourcesContent":["import { values } from 'min-dash';\n\nimport { getEnclosedElements } from '../../util/Elements';\n\nimport { hasSecondaryModifier } from '../../util/Mouse';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\nvar LASSO_TOOL_CURSOR = 'crosshair';\n\n\nexport default function LassoTool(\n    eventBus, canvas, dragging,\n    elementRegistry, selection, toolManager) {\n\n  this._selection = selection;\n  this._dragging = dragging;\n\n  var self = this;\n\n  // lasso visuals implementation\n\n  /**\n  * A helper that realizes the selection box visual\n  */\n  var visuals = {\n\n    create: function(context) {\n      var container = canvas.getDefaultLayer(),\n          frame;\n\n      frame = context.frame = svgCreate('rect');\n      svgAttr(frame, {\n        class: 'djs-lasso-overlay',\n        width:  1,\n        height: 1,\n        x: 0,\n        y: 0\n      });\n\n      svgAppend(container, frame);\n    },\n\n    update: function(context) {\n      var frame = context.frame,\n          bbox = context.bbox;\n\n      svgAttr(frame, {\n        x: bbox.x,\n        y: bbox.y,\n        width: bbox.width,\n        height: bbox.height\n      });\n    },\n\n    remove: function(context) {\n\n      if (context.frame) {\n        svgRemove(context.frame);\n      }\n    }\n  };\n\n  toolManager.registerTool('lasso', {\n    tool: 'lasso.selection',\n    dragging: 'lasso'\n  });\n\n  eventBus.on('lasso.selection.end', function(event) {\n    var target = event.originalEvent.target;\n\n    // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return;\n    }\n\n    eventBus.once('lasso.selection.ended', function() {\n      self.activateLasso(event.originalEvent, true);\n    });\n  });\n\n  // lasso interaction implementation\n\n  eventBus.on('lasso.end', function(event) {\n\n    var bbox = toBBox(event);\n\n    var elements = elementRegistry.filter(function(element) {\n      return element;\n    });\n\n    self.select(elements, bbox);\n  });\n\n  eventBus.on('lasso.start', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.create(context);\n  });\n\n  eventBus.on('lasso.move', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.update(context);\n  });\n\n  eventBus.on('lasso.cleanup', function(event) {\n\n    var context = event.context;\n\n    visuals.remove(context);\n  });\n\n\n  // event integration\n\n  eventBus.on('element.mousedown', 1500, function(event) {\n\n    if (hasSecondaryModifier(event)) {\n      self.activateLasso(event.originalEvent);\n\n      // we've handled the event\n      return true;\n    }\n  });\n}\n\nLassoTool.$inject = [\n  'eventBus',\n  'canvas',\n  'dragging',\n  'elementRegistry',\n  'selection',\n  'toolManager'\n];\n\n\nLassoTool.prototype.activateLasso = function(event, autoActivate) {\n\n  this._dragging.init(event, 'lasso', {\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\nLassoTool.prototype.activateSelection = function(event) {\n\n  this._dragging.init(event, 'lasso.selection', {\n    trapClick: false,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\nLassoTool.prototype.select = function(elements, bbox) {\n  var selectedElements = getEnclosedElements(elements, bbox);\n\n  this._selection.select(values(selectedElements));\n};\n\nLassoTool.prototype.toggle = function() {\n  if (this.isActive()) {\n    this._dragging.cancel();\n  } else {\n    this.activateSelection();\n  }\n};\n\nLassoTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  return context && /^lasso/.test(context.prefix);\n};\n\n\n\nfunction toBBox(event) {\n\n  var start = {\n\n    x: event.x - event.dx,\n    y: event.y - event.dy\n  };\n\n  var end = {\n    x: event.x,\n    y: event.y\n  };\n\n  var bbox;\n\n  if ((start.x <= end.x && start.y < end.y) ||\n      (start.x < end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: start.y,\n      width:  end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x >= end.x && start.y < end.y) ||\n             (start.x > end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: start.y,\n      width:  start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x <= end.x && start.y > end.y) ||\n             (start.x < end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: end.y,\n      width:  end.x - start.x,\n      height: start.y - end.y\n    };\n  } else if ((start.x >= end.x && start.y > end.y) ||\n             (start.x > end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  start.x - end.x,\n      height: start.y - end.y\n    };\n  } else {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  0,\n      height: 0\n    };\n  }\n  return bbox;\n}\n"]},"metadata":{},"sourceType":"module"}