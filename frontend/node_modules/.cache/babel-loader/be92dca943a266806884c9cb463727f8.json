{"ast":null,"code":"import inherits from 'inherits';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\n/**\n * A behavior that unsets the Default property of\n * sequence flow source on element delete, if the\n * removed element is the Gateway or Task's default flow.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\n\nexport default function DeleteSequenceFlowBehavior(eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n  this.preExecute('connection.delete', function (event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source;\n\n    if (isDefaultFlow(connection, source)) {\n      modeling.updateProperties(source, {\n        'default': null\n      });\n    }\n  });\n}\ninherits(DeleteSequenceFlowBehavior, CommandInterceptor);\nDeleteSequenceFlowBehavior.$inject = ['eventBus', 'modeling']; // helpers //////////////////////\n\nfunction isDefaultFlow(connection, source) {\n  if (!is(connection, 'bpmn:SequenceFlow')) {\n    return false;\n  }\n\n  var sourceBo = getBusinessObject(source),\n      sequenceFlow = getBusinessObject(connection);\n  return sourceBo.get('default') === sequenceFlow;\n}","map":{"version":3,"sources":["C:/Users/Vittorio/Documents/GitHub/SPM2021-MTV/frontend/node_modules/bpmn-js/lib/features/modeling/behavior/UnsetDefaultFlowBehavior.js"],"names":["inherits","CommandInterceptor","getBusinessObject","is","DeleteSequenceFlowBehavior","eventBus","modeling","call","preExecute","event","context","connection","source","isDefaultFlow","updateProperties","$inject","sourceBo","sequenceFlow","get"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AAEA,OAAOC,kBAAP,MAA+B,2CAA/B;AAEA,SACEC,iBADF,EAEEC,EAFF,QAGO,yBAHP;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,0BAAT,CAAoCC,QAApC,EAA8CC,QAA9C,EAAwD;AAErEL,EAAAA,kBAAkB,CAACM,IAAnB,CAAwB,IAAxB,EAA8BF,QAA9B;AAGA,OAAKG,UAAL,CAAgB,mBAAhB,EAAqC,UAASC,KAAT,EAAgB;AACnD,QAAIC,OAAO,GAAGD,KAAK,CAACC,OAApB;AAAA,QACIC,UAAU,GAAGD,OAAO,CAACC,UADzB;AAAA,QAEIC,MAAM,GAAGD,UAAU,CAACC,MAFxB;;AAIA,QAAIC,aAAa,CAACF,UAAD,EAAaC,MAAb,CAAjB,EAAuC;AACrCN,MAAAA,QAAQ,CAACQ,gBAAT,CAA0BF,MAA1B,EAAkC;AAChC,mBAAW;AADqB,OAAlC;AAGD;AACF,GAVD;AAWD;AAEDZ,QAAQ,CAACI,0BAAD,EAA6BH,kBAA7B,CAAR;AAEAG,0BAA0B,CAACW,OAA3B,GAAqC,CACnC,UADmC,EAEnC,UAFmC,CAArC,C,CAMA;;AAEA,SAASF,aAAT,CAAuBF,UAAvB,EAAmCC,MAAnC,EAA2C;AAEzC,MAAI,CAACT,EAAE,CAACQ,UAAD,EAAa,mBAAb,CAAP,EAA0C;AACxC,WAAO,KAAP;AACD;;AAED,MAAIK,QAAQ,GAAGd,iBAAiB,CAACU,MAAD,CAAhC;AAAA,MACIK,YAAY,GAAGf,iBAAiB,CAACS,UAAD,CADpC;AAGA,SAAOK,QAAQ,CAACE,GAAT,CAAa,SAAb,MAA4BD,YAAnC;AACD","sourcesContent":["import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport {\n  getBusinessObject,\n  is\n} from '../../../util/ModelUtil';\n\n\n/**\n * A behavior that unsets the Default property of\n * sequence flow source on element delete, if the\n * removed element is the Gateway or Task's default flow.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function DeleteSequenceFlowBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  this.preExecute('connection.delete', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        source = connection.source;\n\n    if (isDefaultFlow(connection, source)) {\n      modeling.updateProperties(source, {\n        'default': null\n      });\n    }\n  });\n}\n\ninherits(DeleteSequenceFlowBehavior, CommandInterceptor);\n\nDeleteSequenceFlowBehavior.$inject = [\n  'eventBus',\n  'modeling'\n];\n\n\n// helpers //////////////////////\n\nfunction isDefaultFlow(connection, source) {\n\n  if (!is(connection, 'bpmn:SequenceFlow')) {\n    return false;\n  }\n\n  var sourceBo = getBusinessObject(source),\n      sequenceFlow = getBusinessObject(connection);\n\n  return sourceBo.get('default') === sequenceFlow;\n}"]},"metadata":{},"sourceType":"module"}