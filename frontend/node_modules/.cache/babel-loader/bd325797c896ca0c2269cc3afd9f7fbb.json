{"ast":null,"code":"import inherits from 'inherits';\nimport BaseModeling from 'diagram-js/lib/features/modeling/Modeling';\nimport UpdatePropertiesHandler from './cmd/UpdatePropertiesHandler';\nimport UpdateCanvasRootHandler from './cmd/UpdateCanvasRootHandler';\nimport AddLaneHandler from './cmd/AddLaneHandler';\nimport SplitLaneHandler from './cmd/SplitLaneHandler';\nimport ResizeLaneHandler from './cmd/ResizeLaneHandler';\nimport UpdateFlowNodeRefsHandler from './cmd/UpdateFlowNodeRefsHandler';\nimport IdClaimHandler from './cmd/IdClaimHandler';\nimport SetColorHandler from './cmd/SetColorHandler';\nimport UpdateLabelHandler from '../label-editing/cmd/UpdateLabelHandler';\n/**\n * BPMN 2.0 modeling features activator\n *\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {CommandStack} commandStack\n * @param {BpmnRules} bpmnRules\n */\n\nexport default function Modeling(eventBus, elementFactory, commandStack, bpmnRules) {\n  BaseModeling.call(this, eventBus, elementFactory, commandStack);\n  this._bpmnRules = bpmnRules;\n}\ninherits(Modeling, BaseModeling);\nModeling.$inject = ['eventBus', 'elementFactory', 'commandStack', 'bpmnRules'];\n\nModeling.prototype.getHandlers = function () {\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\n  handlers['element.updateProperties'] = UpdatePropertiesHandler;\n  handlers['canvas.updateRoot'] = UpdateCanvasRootHandler;\n  handlers['lane.add'] = AddLaneHandler;\n  handlers['lane.resize'] = ResizeLaneHandler;\n  handlers['lane.split'] = SplitLaneHandler;\n  handlers['lane.updateRefs'] = UpdateFlowNodeRefsHandler;\n  handlers['id.updateClaim'] = IdClaimHandler;\n  handlers['element.setColor'] = SetColorHandler;\n  handlers['element.updateLabel'] = UpdateLabelHandler;\n  return handlers;\n};\n\nModeling.prototype.updateLabel = function (element, newLabel, newBounds, hints) {\n  this._commandStack.execute('element.updateLabel', {\n    element: element,\n    newLabel: newLabel,\n    newBounds: newBounds,\n    hints: hints || {}\n  });\n};\n\nModeling.prototype.connect = function (source, target, attrs, hints) {\n  var bpmnRules = this._bpmnRules;\n\n  if (!attrs) {\n    attrs = bpmnRules.canConnect(source, target);\n  }\n\n  if (!attrs) {\n    return;\n  }\n\n  return this.createConnection(source, target, attrs, source.parent, hints);\n};\n\nModeling.prototype.updateProperties = function (element, properties) {\n  this._commandStack.execute('element.updateProperties', {\n    element: element,\n    properties: properties\n  });\n};\n\nModeling.prototype.resizeLane = function (laneShape, newBounds, balanced) {\n  this._commandStack.execute('lane.resize', {\n    shape: laneShape,\n    newBounds: newBounds,\n    balanced: balanced\n  });\n};\n\nModeling.prototype.addLane = function (targetLaneShape, location) {\n  var context = {\n    shape: targetLaneShape,\n    location: location\n  };\n\n  this._commandStack.execute('lane.add', context);\n\n  return context.newLane;\n};\n\nModeling.prototype.splitLane = function (targetLane, count) {\n  this._commandStack.execute('lane.split', {\n    shape: targetLane,\n    count: count\n  });\n};\n/**\n * Transform the current diagram into a collaboration.\n *\n * @return {djs.model.Root} the new root element\n */\n\n\nModeling.prototype.makeCollaboration = function () {\n  var collaborationElement = this._create('root', {\n    type: 'bpmn:Collaboration'\n  });\n\n  var context = {\n    newRoot: collaborationElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n\n  return collaborationElement;\n};\n\nModeling.prototype.updateLaneRefs = function (flowNodeShapes, laneShapes) {\n  this._commandStack.execute('lane.updateRefs', {\n    flowNodeShapes: flowNodeShapes,\n    laneShapes: laneShapes\n  });\n};\n/**\n * Transform the current diagram into a process.\n *\n * @return {djs.model.Root} the new root element\n */\n\n\nModeling.prototype.makeProcess = function () {\n  var processElement = this._create('root', {\n    type: 'bpmn:Process'\n  });\n\n  var context = {\n    newRoot: processElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n};\n\nModeling.prototype.claimId = function (id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement,\n    claiming: true\n  });\n};\n\nModeling.prototype.unclaimId = function (id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement\n  });\n};\n\nModeling.prototype.setColor = function (elements, colors) {\n  if (!elements.length) {\n    elements = [elements];\n  }\n\n  this._commandStack.execute('element.setColor', {\n    elements: elements,\n    colors: colors\n  });\n};","map":{"version":3,"sources":["C:/Users/Vittorio/Documents/GitHub/goal-bpmn/frontend/node_modules/bpmn-js/lib/features/modeling/Modeling.js"],"names":["inherits","BaseModeling","UpdatePropertiesHandler","UpdateCanvasRootHandler","AddLaneHandler","SplitLaneHandler","ResizeLaneHandler","UpdateFlowNodeRefsHandler","IdClaimHandler","SetColorHandler","UpdateLabelHandler","Modeling","eventBus","elementFactory","commandStack","bpmnRules","call","_bpmnRules","$inject","prototype","getHandlers","handlers","updateLabel","element","newLabel","newBounds","hints","_commandStack","execute","connect","source","target","attrs","canConnect","createConnection","parent","updateProperties","properties","resizeLane","laneShape","balanced","shape","addLane","targetLaneShape","location","context","newLane","splitLane","targetLane","count","makeCollaboration","collaborationElement","_create","type","newRoot","updateLaneRefs","flowNodeShapes","laneShapes","makeProcess","processElement","claimId","id","moddleElement","claiming","unclaimId","setColor","elements","colors","length"],"mappings":"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","sourcesContent":["import inherits from 'inherits';\n\nimport BaseModeling from 'diagram-js/lib/features/modeling/Modeling';\n\nimport UpdatePropertiesHandler from './cmd/UpdatePropertiesHandler';\nimport UpdateCanvasRootHandler from './cmd/UpdateCanvasRootHandler';\nimport AddLaneHandler from './cmd/AddLaneHandler';\nimport SplitLaneHandler from './cmd/SplitLaneHandler';\nimport ResizeLaneHandler from './cmd/ResizeLaneHandler';\nimport UpdateFlowNodeRefsHandler from './cmd/UpdateFlowNodeRefsHandler';\nimport IdClaimHandler from './cmd/IdClaimHandler';\nimport SetColorHandler from './cmd/SetColorHandler';\n\nimport UpdateLabelHandler from '../label-editing/cmd/UpdateLabelHandler';\n\n\n/**\n * BPMN 2.0 modeling features activator\n *\n * @param {EventBus} eventBus\n * @param {ElementFactory} elementFactory\n * @param {CommandStack} commandStack\n * @param {BpmnRules} bpmnRules\n */\nexport default function Modeling(\n    eventBus, elementFactory, commandStack,\n    bpmnRules) {\n\n  BaseModeling.call(this, eventBus, elementFactory, commandStack);\n\n  this._bpmnRules = bpmnRules;\n}\n\ninherits(Modeling, BaseModeling);\n\nModeling.$inject = [\n  'eventBus',\n  'elementFactory',\n  'commandStack',\n  'bpmnRules'\n];\n\n\nModeling.prototype.getHandlers = function() {\n  var handlers = BaseModeling.prototype.getHandlers.call(this);\n\n  handlers['element.updateProperties'] = UpdatePropertiesHandler;\n  handlers['canvas.updateRoot'] = UpdateCanvasRootHandler;\n  handlers['lane.add'] = AddLaneHandler;\n  handlers['lane.resize'] = ResizeLaneHandler;\n  handlers['lane.split'] = SplitLaneHandler;\n  handlers['lane.updateRefs'] = UpdateFlowNodeRefsHandler;\n  handlers['id.updateClaim'] = IdClaimHandler;\n  handlers['element.setColor'] = SetColorHandler;\n  handlers['element.updateLabel'] = UpdateLabelHandler;\n\n  return handlers;\n};\n\n\nModeling.prototype.updateLabel = function(element, newLabel, newBounds, hints) {\n  this._commandStack.execute('element.updateLabel', {\n    element: element,\n    newLabel: newLabel,\n    newBounds: newBounds,\n    hints: hints || {}\n  });\n};\n\n\nModeling.prototype.connect = function(source, target, attrs, hints) {\n\n  var bpmnRules = this._bpmnRules;\n\n  if (!attrs) {\n    attrs = bpmnRules.canConnect(source, target);\n  }\n\n  if (!attrs) {\n    return;\n  }\n\n  return this.createConnection(source, target, attrs, source.parent, hints);\n};\n\n\nModeling.prototype.updateProperties = function(element, properties) {\n  this._commandStack.execute('element.updateProperties', {\n    element: element,\n    properties: properties\n  });\n};\n\nModeling.prototype.resizeLane = function(laneShape, newBounds, balanced) {\n  this._commandStack.execute('lane.resize', {\n    shape: laneShape,\n    newBounds: newBounds,\n    balanced: balanced\n  });\n};\n\nModeling.prototype.addLane = function(targetLaneShape, location) {\n  var context = {\n    shape: targetLaneShape,\n    location: location\n  };\n\n  this._commandStack.execute('lane.add', context);\n\n  return context.newLane;\n};\n\nModeling.prototype.splitLane = function(targetLane, count) {\n  this._commandStack.execute('lane.split', {\n    shape: targetLane,\n    count: count\n  });\n};\n\n/**\n * Transform the current diagram into a collaboration.\n *\n * @return {djs.model.Root} the new root element\n */\nModeling.prototype.makeCollaboration = function() {\n\n  var collaborationElement = this._create('root', {\n    type: 'bpmn:Collaboration'\n  });\n\n  var context = {\n    newRoot: collaborationElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n\n  return collaborationElement;\n};\n\nModeling.prototype.updateLaneRefs = function(flowNodeShapes, laneShapes) {\n\n  this._commandStack.execute('lane.updateRefs', {\n    flowNodeShapes: flowNodeShapes,\n    laneShapes: laneShapes\n  });\n};\n\n/**\n * Transform the current diagram into a process.\n *\n * @return {djs.model.Root} the new root element\n */\nModeling.prototype.makeProcess = function() {\n\n  var processElement = this._create('root', {\n    type: 'bpmn:Process'\n  });\n\n  var context = {\n    newRoot: processElement\n  };\n\n  this._commandStack.execute('canvas.updateRoot', context);\n};\n\n\nModeling.prototype.claimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement,\n    claiming: true\n  });\n};\n\n\nModeling.prototype.unclaimId = function(id, moddleElement) {\n  this._commandStack.execute('id.updateClaim', {\n    id: id,\n    element: moddleElement\n  });\n};\n\nModeling.prototype.setColor = function(elements, colors) {\n  if (!elements.length) {\n    elements = [ elements ];\n  }\n\n  this._commandStack.execute('element.setColor', {\n    elements: elements,\n    colors: colors\n  });\n};\n"]},"metadata":{},"sourceType":"module"}