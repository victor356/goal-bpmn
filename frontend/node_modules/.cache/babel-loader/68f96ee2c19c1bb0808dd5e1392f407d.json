{"ast":null,"code":"import inherits from 'inherits';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { is } from '../../../util/ModelUtil';\n/**\n * BPMN specific remove behavior\n */\n\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function (context) {\n    var shape = context.shape,\n        parent = shape.parent; // activate the behavior if the shape to be removed\n    // is a participant\n\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n  this.postExecute('shape.delete', function (context) {\n    var collaborationRoot = context.collaborationRoot;\n\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n      // replace empty collaboration with process diagram\n      modeling.makeProcess();\n    }\n  }, true);\n}\nRemoveParticipantBehavior.$inject = ['eventBus', 'modeling'];\ninherits(RemoveParticipantBehavior, CommandInterceptor);","map":{"version":3,"sources":["C:/Users/Vittorio/Documents/GitHub/goal-bpmn/frontend/node_modules/bpmn-js/lib/features/modeling/behavior/RemoveParticipantBehavior.js"],"names":["inherits","CommandInterceptor","is","RemoveParticipantBehavior","eventBus","modeling","call","preExecute","context","shape","parent","collaborationRoot","postExecute","businessObject","participants","length","makeProcess","$inject"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AAEA,OAAOC,kBAAP,MAA+B,2CAA/B;AAEA,SAASC,EAAT,QAAmB,yBAAnB;AAGA;AACA;AACA;;AACA,eAAe,SAASC,yBAAT,CAAmCC,QAAnC,EAA6CC,QAA7C,EAAuD;AAEpEJ,EAAAA,kBAAkB,CAACK,IAAnB,CAAwB,IAAxB,EAA8BF,QAA9B;AAGA;AACF;AACA;AACA;;AAEE,OAAKG,UAAL,CAAgB,cAAhB,EAAgC,UAASC,OAAT,EAAkB;AAEhD,QAAIC,KAAK,GAAGD,OAAO,CAACC,KAApB;AAAA,QACIC,MAAM,GAAGD,KAAK,CAACC,MADnB,CAFgD,CAKhD;AACA;;AACA,QAAIR,EAAE,CAACO,KAAD,EAAQ,kBAAR,CAAN,EAAmC;AACjCD,MAAAA,OAAO,CAACG,iBAAR,GAA4BD,MAA5B;AACD;AACF,GAVD,EAUG,IAVH;AAYA,OAAKE,WAAL,CAAiB,cAAjB,EAAiC,UAASJ,OAAT,EAAkB;AAEjD,QAAIG,iBAAiB,GAAGH,OAAO,CAACG,iBAAhC;;AAEA,QAAIA,iBAAiB,IAAI,CAACA,iBAAiB,CAACE,cAAlB,CAAiCC,YAAjC,CAA8CC,MAAxE,EAAgF;AAC9E;AACAV,MAAAA,QAAQ,CAACW,WAAT;AACD;AACF,GARD,EAQG,IARH;AAUD;AAEDb,yBAAyB,CAACc,OAA1B,GAAoC,CAAE,UAAF,EAAc,UAAd,CAApC;AAEAjB,QAAQ,CAACG,yBAAD,EAA4BF,kBAA5B,CAAR","sourcesContent":["import inherits from 'inherits';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n\n/**\n * BPMN specific remove behavior\n */\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function(context) {\n\n    var shape = context.shape,\n        parent = shape.parent;\n\n    // activate the behavior if the shape to be removed\n    // is a participant\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n\n  this.postExecute('shape.delete', function(context) {\n\n    var collaborationRoot = context.collaborationRoot;\n\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n      // replace empty collaboration with process diagram\n      modeling.makeProcess();\n    }\n  }, true);\n\n}\n\nRemoveParticipantBehavior.$inject = [ 'eventBus', 'modeling' ];\n\ninherits(RemoveParticipantBehavior, CommandInterceptor);"]},"metadata":{},"sourceType":"module"}