{"ast":null,"code":"import { forEach, assign, find, matchPattern, isDefined } from 'min-dash';\nimport { delegate as domDelegate, domify, classes as domClasses, attr as domAttr, remove as domRemove } from 'min-dom';\nvar DATA_REF = 'data-id';\n/**\n * A popup menu that can be used to display a list of actions anywhere in the canvas.\n *\n * @param {Object} config\n * @param {Boolean|Object} [config.scale={ min: 1.0, max: 1.5 }]\n * @param {Number} [config.scale.min]\n * @param {Number} [config.scale.max]\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n *\n * @class\n * @constructor\n */\n\nexport default function PopupMenu(config, eventBus, canvas) {\n  var scale = isDefined(config && config.scale) ? config.scale : {\n    min: 1,\n    max: 1.5\n  };\n  this._config = {\n    scale: scale\n  };\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._providers = {};\n  this._current = {};\n}\nPopupMenu.$inject = ['config.popupMenu', 'eventBus', 'canvas'];\n/**\n * Registers a popup menu provider\n *\n * @param  {String} id\n * @param  {Object} provider\n *\n * @example\n *\n * popupMenu.registerProvider('myMenuID', {\n *   getEntries: function(element) {\n *     return [\n *       {\n *         id: 'entry-1',\n *         label: 'My Entry',\n *         action: 'alert(\"I have been clicked!\")'\n *       }\n *     ];\n *   }\n * });\n */\n\nPopupMenu.prototype.registerProvider = function (id, provider) {\n  this._providers[id] = provider;\n};\n/**\n * Determine if the popup menu has entries.\n *\n * @return {Boolean} true if empty\n */\n\n\nPopupMenu.prototype.isEmpty = function (element, providerId) {\n  if (!element) {\n    throw new Error('element parameter is missing');\n  }\n\n  if (!providerId) {\n    throw new Error('providerId parameter is missing');\n  }\n\n  var provider = this._providers[providerId];\n  var entries = provider.getEntries(element),\n      headerEntries = provider.getHeaderEntries && provider.getHeaderEntries(element);\n  var hasEntries = entries.length > 0,\n      hasHeaderEntries = headerEntries && headerEntries.length > 0;\n  return !hasEntries && !hasHeaderEntries;\n};\n/**\n * Create entries and open popup menu at given position\n *\n * @param  {Object} element\n * @param  {String} id provider id\n * @param  {Object} position\n *\n * @return {Object} popup menu instance\n */\n\n\nPopupMenu.prototype.open = function (element, id, position) {\n  var provider = this._providers[id];\n\n  if (!element) {\n    throw new Error('Element is missing');\n  }\n\n  if (!provider) {\n    throw new Error('Provider is not registered: ' + id);\n  }\n\n  if (!position) {\n    throw new Error('the position argument is missing');\n  }\n\n  if (this.isOpen()) {\n    this.close();\n  }\n\n  this._emit('open');\n\n  var current = this._current = {\n    provider: provider,\n    className: id,\n    element: element,\n    position: position\n  };\n\n  if (provider.getHeaderEntries) {\n    current.headerEntries = provider.getHeaderEntries(element);\n  }\n\n  current.entries = provider.getEntries(element);\n  current.container = this._createContainer();\n  var headerEntries = current.headerEntries || [],\n      entries = current.entries || [];\n\n  if (headerEntries.length) {\n    current.container.appendChild(this._createEntries(current.headerEntries, 'djs-popup-header'));\n  }\n\n  if (entries.length) {\n    current.container.appendChild(this._createEntries(current.entries, 'djs-popup-body'));\n  }\n\n  var canvas = this._canvas,\n      parent = canvas.getContainer();\n\n  this._attachContainer(current.container, parent, position.cursor);\n};\n/**\n * Removes the popup menu and unbinds the event handlers.\n */\n\n\nPopupMenu.prototype.close = function () {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._emit('close');\n\n  this._unbindHandlers();\n\n  domRemove(this._current.container);\n  this._current.container = null;\n};\n/**\n * Determine if an open popup menu exist.\n *\n * @return {Boolean} true if open\n */\n\n\nPopupMenu.prototype.isOpen = function () {\n  return !!this._current.container;\n};\n/**\n * Trigger an action associated with an entry.\n *\n * @param {Object} event\n *\n * @return the result of the action callback, if any\n */\n\n\nPopupMenu.prototype.trigger = function (event) {\n  // silence other actions\n  event.preventDefault();\n  var element = event.delegateTarget || event.target,\n      entryId = domAttr(element, DATA_REF);\n\n  var entry = this._getEntry(entryId);\n\n  if (entry.action) {\n    return entry.action.call(null, event, entry);\n  }\n};\n/**\n * Gets an entry instance (either entry or headerEntry) by id.\n *\n * @param  {String} entryId\n *\n * @return {Object} entry instance\n */\n\n\nPopupMenu.prototype._getEntry = function (entryId) {\n  var search = matchPattern({\n    id: entryId\n  });\n  var entry = find(this._current.entries, search) || find(this._current.headerEntries, search);\n\n  if (!entry) {\n    throw new Error('entry not found');\n  }\n\n  return entry;\n};\n\nPopupMenu.prototype._emit = function (eventName) {\n  this._eventBus.fire('popupMenu.' + eventName);\n};\n/**\n * Creates the popup menu container.\n *\n * @return {Object} a DOM container\n */\n\n\nPopupMenu.prototype._createContainer = function () {\n  var container = domify('<div class=\"djs-popup\">'),\n      position = this._current.position,\n      className = this._current.className;\n  assign(container.style, {\n    position: 'absolute',\n    left: position.x + 'px',\n    top: position.y + 'px',\n    visibility: 'hidden'\n  });\n  domClasses(container).add(className);\n  return container;\n};\n/**\n * Attaches the container to the DOM and binds the event handlers.\n *\n * @param {Object} container\n * @param {Object} parent\n */\n\n\nPopupMenu.prototype._attachContainer = function (container, parent, cursor) {\n  var self = this; // Event handler\n\n  domDelegate.bind(container, '.entry', 'click', function (event) {\n    self.trigger(event);\n  });\n\n  this._updateScale(container); // Attach to DOM\n\n\n  parent.appendChild(container);\n\n  if (cursor) {\n    this._assureIsInbounds(container, cursor);\n  } // Add Handler\n\n\n  this._bindHandlers();\n};\n/**\n * Updates popup style.transform with respect to the config and zoom level.\n *\n * @method _updateScale\n *\n * @param {Object} container\n */\n\n\nPopupMenu.prototype._updateScale = function (container) {\n  var zoom = this._canvas.zoom();\n\n  var scaleConfig = this._config.scale,\n      minScale,\n      maxScale,\n      scale = zoom;\n\n  if (scaleConfig !== true) {\n    if (scaleConfig === false) {\n      minScale = 1;\n      maxScale = 1;\n    } else {\n      minScale = scaleConfig.min;\n      maxScale = scaleConfig.max;\n    }\n\n    if (isDefined(minScale) && zoom < minScale) {\n      scale = minScale;\n    }\n\n    if (isDefined(maxScale) && zoom > maxScale) {\n      scale = maxScale;\n    }\n  }\n\n  setTransform(container, 'scale(' + scale + ')');\n};\n/**\n * Make sure that the menu is always fully shown\n *\n * @method function\n *\n * @param  {Object} container\n * @param  {Position} cursor {x, y}\n */\n\n\nPopupMenu.prototype._assureIsInbounds = function (container, cursor) {\n  var canvas = this._canvas,\n      clientRect = canvas._container.getBoundingClientRect();\n\n  var containerX = container.offsetLeft,\n      containerY = container.offsetTop,\n      containerWidth = container.scrollWidth,\n      containerHeight = container.scrollHeight,\n      overAxis = {},\n      left,\n      top;\n  var cursorPosition = {\n    x: cursor.x - clientRect.left,\n    y: cursor.y - clientRect.top\n  };\n\n  if (containerX + containerWidth > clientRect.width) {\n    overAxis.x = true;\n  }\n\n  if (containerY + containerHeight > clientRect.height) {\n    overAxis.y = true;\n  }\n\n  if (overAxis.x && overAxis.y) {\n    left = cursorPosition.x - containerWidth + 'px';\n    top = cursorPosition.y - containerHeight + 'px';\n  } else if (overAxis.x) {\n    left = cursorPosition.x - containerWidth + 'px';\n    top = cursorPosition.y + 'px';\n  } else if (overAxis.y && cursorPosition.y < containerHeight) {\n    left = cursorPosition.x + 'px';\n    top = 10 + 'px';\n  } else if (overAxis.y) {\n    left = cursorPosition.x + 'px';\n    top = cursorPosition.y - containerHeight + 'px';\n  }\n\n  assign(container.style, {\n    left: left,\n    top: top\n  }, {\n    visibility: 'visible',\n    'z-index': 1000\n  });\n};\n/**\n * Creates a list of entries and returns them as a DOM container.\n *\n * @param {Array<Object>} entries an array of entry objects\n * @param {String} className the class name of the entry container\n *\n * @return {Object} a DOM container\n */\n\n\nPopupMenu.prototype._createEntries = function (entries, className) {\n  var entriesContainer = domify('<div>'),\n      self = this;\n  domClasses(entriesContainer).add(className);\n  forEach(entries, function (entry) {\n    var entryContainer = self._createEntry(entry, entriesContainer);\n\n    entriesContainer.appendChild(entryContainer);\n  });\n  return entriesContainer;\n};\n/**\n * Creates a single entry and returns it as a DOM container.\n *\n * @param  {Object} entry\n *\n * @return {Object} a DOM container\n */\n\n\nPopupMenu.prototype._createEntry = function (entry) {\n  if (!entry.id) {\n    throw new Error('every entry must have the id property set');\n  }\n\n  var entryContainer = domify('<div>'),\n      entryClasses = domClasses(entryContainer);\n  entryClasses.add('entry');\n\n  if (entry.className) {\n    entry.className.split(' ').forEach(function (className) {\n      entryClasses.add(className);\n    });\n  }\n\n  domAttr(entryContainer, DATA_REF, entry.id);\n\n  if (entry.label) {\n    var label = domify('<span>');\n    label.textContent = entry.label;\n    entryContainer.appendChild(label);\n  }\n\n  if (entry.imageUrl) {\n    entryContainer.appendChild(domify('<img src=\"' + entry.imageUrl + '\" />'));\n  }\n\n  if (entry.active === true) {\n    entryClasses.add('active');\n  }\n\n  if (entry.disabled === true) {\n    entryClasses.add('disabled');\n  }\n\n  if (entry.title) {\n    entryContainer.title = entry.title;\n  }\n\n  return entryContainer;\n};\n/**\n * Binds the `close` method to 'contextPad.close' & 'canvas.viewbox.changed'.\n */\n\n\nPopupMenu.prototype._bindHandlers = function () {\n  var eventBus = this._eventBus,\n      self = this;\n\n  function close() {\n    self.close();\n  }\n\n  eventBus.once('contextPad.close', close);\n  eventBus.once('canvas.viewbox.changing', close);\n  eventBus.once('commandStack.changed', close);\n};\n/**\n * Unbinds the `close` method to 'contextPad.close' & 'canvas.viewbox.changing'.\n */\n\n\nPopupMenu.prototype._unbindHandlers = function () {\n  var eventBus = this._eventBus,\n      self = this;\n\n  function close() {\n    self.close();\n  }\n\n  eventBus.off('contextPad.close', close);\n  eventBus.off('canvas.viewbox.changed', close);\n  eventBus.off('commandStack.changed', close);\n}; // helpers /////////////////////////////\n\n\nfunction setTransform(element, transform) {\n  element.style['transform-origin'] = 'top left';\n  ['', '-ms-', '-webkit-'].forEach(function (prefix) {\n    element.style[prefix + 'transform'] = transform;\n  });\n}","map":{"version":3,"sources":["C:/Users/Vittorio/Documents/GitHub/SPM2021-MTV/frontend/node_modules/diagram-js/lib/features/popup-menu/PopupMenu.js"],"names":["forEach","assign","find","matchPattern","isDefined","delegate","domDelegate","domify","classes","domClasses","attr","domAttr","remove","domRemove","DATA_REF","PopupMenu","config","eventBus","canvas","scale","min","max","_config","_eventBus","_canvas","_providers","_current","$inject","prototype","registerProvider","id","provider","isEmpty","element","providerId","Error","entries","getEntries","headerEntries","getHeaderEntries","hasEntries","length","hasHeaderEntries","open","position","isOpen","close","_emit","current","className","container","_createContainer","appendChild","_createEntries","parent","getContainer","_attachContainer","cursor","_unbindHandlers","trigger","event","preventDefault","delegateTarget","target","entryId","entry","_getEntry","action","call","search","eventName","fire","style","left","x","top","y","visibility","add","self","bind","_updateScale","_assureIsInbounds","_bindHandlers","zoom","scaleConfig","minScale","maxScale","setTransform","clientRect","_container","getBoundingClientRect","containerX","offsetLeft","containerY","offsetTop","containerWidth","scrollWidth","containerHeight","scrollHeight","overAxis","cursorPosition","width","height","entriesContainer","entryContainer","_createEntry","entryClasses","split","label","textContent","imageUrl","active","disabled","title","once","off","transform","prefix"],"mappings":"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","sourcesContent":["import {\n  forEach,\n  assign,\n  find,\n  matchPattern,\n  isDefined\n} from 'min-dash';\n\nimport {\n  delegate as domDelegate,\n  domify as domify,\n  classes as domClasses,\n  attr as domAttr,\n  remove as domRemove\n} from 'min-dom';\n\nvar DATA_REF = 'data-id';\n\n\n/**\n * A popup menu that can be used to display a list of actions anywhere in the canvas.\n *\n * @param {Object} config\n * @param {Boolean|Object} [config.scale={ min: 1.0, max: 1.5 }]\n * @param {Number} [config.scale.min]\n * @param {Number} [config.scale.max]\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n *\n * @class\n * @constructor\n */\nexport default function PopupMenu(config, eventBus, canvas) {\n\n  var scale = isDefined(config && config.scale) ? config.scale : {\n    min: 1,\n    max: 1.5\n  };\n\n  this._config = {\n    scale: scale\n  };\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  this._providers = {};\n  this._current = {};\n}\n\nPopupMenu.$inject = [\n  'config.popupMenu',\n  'eventBus',\n  'canvas'\n];\n\n/**\n * Registers a popup menu provider\n *\n * @param  {String} id\n * @param  {Object} provider\n *\n * @example\n *\n * popupMenu.registerProvider('myMenuID', {\n *   getEntries: function(element) {\n *     return [\n *       {\n *         id: 'entry-1',\n *         label: 'My Entry',\n *         action: 'alert(\"I have been clicked!\")'\n *       }\n *     ];\n *   }\n * });\n */\nPopupMenu.prototype.registerProvider = function(id, provider) {\n  this._providers[id] = provider;\n};\n\n\n/**\n * Determine if the popup menu has entries.\n *\n * @return {Boolean} true if empty\n */\nPopupMenu.prototype.isEmpty = function(element, providerId) {\n  if (!element) {\n    throw new Error('element parameter is missing');\n  }\n\n  if (!providerId) {\n    throw new Error('providerId parameter is missing');\n  }\n\n  var provider = this._providers[providerId];\n\n  var entries = provider.getEntries(element),\n      headerEntries = provider.getHeaderEntries && provider.getHeaderEntries(element);\n\n  var hasEntries = entries.length > 0,\n      hasHeaderEntries = headerEntries && headerEntries.length > 0;\n\n  return !hasEntries && !hasHeaderEntries;\n};\n\n\n/**\n * Create entries and open popup menu at given position\n *\n * @param  {Object} element\n * @param  {String} id provider id\n * @param  {Object} position\n *\n * @return {Object} popup menu instance\n */\nPopupMenu.prototype.open = function(element, id, position) {\n\n  var provider = this._providers[id];\n\n  if (!element) {\n    throw new Error('Element is missing');\n  }\n\n  if (!provider) {\n    throw new Error('Provider is not registered: ' + id);\n  }\n\n  if (!position) {\n    throw new Error('the position argument is missing');\n  }\n\n  if (this.isOpen()) {\n    this.close();\n  }\n\n  this._emit('open');\n\n  var current = this._current = {\n    provider: provider,\n    className: id,\n    element: element,\n    position: position\n  };\n\n  if (provider.getHeaderEntries) {\n    current.headerEntries = provider.getHeaderEntries(element);\n  }\n\n  current.entries = provider.getEntries(element);\n\n  current.container = this._createContainer();\n\n  var headerEntries = current.headerEntries || [],\n      entries = current.entries || [];\n\n  if (headerEntries.length) {\n    current.container.appendChild(\n      this._createEntries(current.headerEntries, 'djs-popup-header')\n    );\n  }\n\n  if (entries.length) {\n    current.container.appendChild(\n      this._createEntries(current.entries, 'djs-popup-body')\n    );\n  }\n\n  var canvas = this._canvas,\n      parent = canvas.getContainer();\n\n  this._attachContainer(current.container, parent, position.cursor);\n};\n\n\n/**\n * Removes the popup menu and unbinds the event handlers.\n */\nPopupMenu.prototype.close = function() {\n\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._emit('close');\n\n  this._unbindHandlers();\n  domRemove(this._current.container);\n  this._current.container = null;\n};\n\n\n/**\n * Determine if an open popup menu exist.\n *\n * @return {Boolean} true if open\n */\nPopupMenu.prototype.isOpen = function() {\n  return !!this._current.container;\n};\n\n\n/**\n * Trigger an action associated with an entry.\n *\n * @param {Object} event\n *\n * @return the result of the action callback, if any\n */\nPopupMenu.prototype.trigger = function(event) {\n\n  // silence other actions\n  event.preventDefault();\n\n  var element = event.delegateTarget || event.target,\n      entryId = domAttr(element, DATA_REF);\n\n  var entry = this._getEntry(entryId);\n\n  if (entry.action) {\n    return entry.action.call(null, event, entry);\n  }\n};\n\n/**\n * Gets an entry instance (either entry or headerEntry) by id.\n *\n * @param  {String} entryId\n *\n * @return {Object} entry instance\n */\nPopupMenu.prototype._getEntry = function(entryId) {\n\n  var search = matchPattern({ id: entryId });\n\n  var entry = find(this._current.entries, search) || find(this._current.headerEntries, search);\n\n  if (!entry) {\n    throw new Error('entry not found');\n  }\n\n  return entry;\n};\n\nPopupMenu.prototype._emit = function(eventName) {\n  this._eventBus.fire('popupMenu.' + eventName);\n};\n\n/**\n * Creates the popup menu container.\n *\n * @return {Object} a DOM container\n */\nPopupMenu.prototype._createContainer = function() {\n  var container = domify('<div class=\"djs-popup\">'),\n      position = this._current.position,\n      className = this._current.className;\n\n  assign(container.style, {\n    position: 'absolute',\n    left: position.x + 'px',\n    top: position.y + 'px',\n    visibility: 'hidden'\n  });\n\n  domClasses(container).add(className);\n\n  return container;\n};\n\n\n/**\n * Attaches the container to the DOM and binds the event handlers.\n *\n * @param {Object} container\n * @param {Object} parent\n */\nPopupMenu.prototype._attachContainer = function(container, parent, cursor) {\n  var self = this;\n\n  // Event handler\n  domDelegate.bind(container, '.entry' ,'click', function(event) {\n    self.trigger(event);\n  });\n\n  this._updateScale(container);\n\n  // Attach to DOM\n  parent.appendChild(container);\n\n  if (cursor) {\n    this._assureIsInbounds(container, cursor);\n  }\n\n  // Add Handler\n  this._bindHandlers();\n};\n\n\n/**\n * Updates popup style.transform with respect to the config and zoom level.\n *\n * @method _updateScale\n *\n * @param {Object} container\n */\nPopupMenu.prototype._updateScale = function(container) {\n  var zoom = this._canvas.zoom();\n\n  var scaleConfig = this._config.scale,\n      minScale,\n      maxScale,\n      scale = zoom;\n\n  if (scaleConfig !== true) {\n\n    if (scaleConfig === false) {\n      minScale = 1;\n      maxScale = 1;\n    } else {\n      minScale = scaleConfig.min;\n      maxScale = scaleConfig.max;\n    }\n\n    if (isDefined(minScale) && zoom < minScale) {\n      scale = minScale;\n    }\n\n    if (isDefined(maxScale) && zoom > maxScale) {\n      scale = maxScale;\n    }\n\n  }\n\n  setTransform(container, 'scale(' + scale + ')');\n};\n\n\n/**\n * Make sure that the menu is always fully shown\n *\n * @method function\n *\n * @param  {Object} container\n * @param  {Position} cursor {x, y}\n */\nPopupMenu.prototype._assureIsInbounds = function(container, cursor) {\n  var canvas = this._canvas,\n      clientRect = canvas._container.getBoundingClientRect();\n\n  var containerX = container.offsetLeft,\n      containerY = container.offsetTop,\n      containerWidth = container.scrollWidth,\n      containerHeight = container.scrollHeight,\n      overAxis = {},\n      left, top;\n\n  var cursorPosition = {\n    x: cursor.x - clientRect.left,\n    y: cursor.y - clientRect.top\n  };\n\n  if (containerX + containerWidth > clientRect.width) {\n    overAxis.x = true;\n  }\n\n  if (containerY + containerHeight > clientRect.height) {\n    overAxis.y = true;\n  }\n\n  if (overAxis.x && overAxis.y) {\n    left = cursorPosition.x - containerWidth + 'px';\n    top = cursorPosition.y - containerHeight + 'px';\n  } else if (overAxis.x) {\n    left = cursorPosition.x - containerWidth + 'px';\n    top = cursorPosition.y + 'px';\n  } else if (overAxis.y && cursorPosition.y < containerHeight) {\n    left = cursorPosition.x + 'px';\n    top = 10 + 'px';\n  } else if (overAxis.y) {\n    left = cursorPosition.x + 'px';\n    top = cursorPosition.y - containerHeight + 'px';\n  }\n\n  assign(container.style, { left: left, top: top }, { visibility: 'visible', 'z-index': 1000 });\n};\n\n\n/**\n * Creates a list of entries and returns them as a DOM container.\n *\n * @param {Array<Object>} entries an array of entry objects\n * @param {String} className the class name of the entry container\n *\n * @return {Object} a DOM container\n */\nPopupMenu.prototype._createEntries = function(entries, className) {\n\n  var entriesContainer = domify('<div>'),\n      self = this;\n\n  domClasses(entriesContainer).add(className);\n\n  forEach(entries, function(entry) {\n    var entryContainer = self._createEntry(entry, entriesContainer);\n    entriesContainer.appendChild(entryContainer);\n  });\n\n  return entriesContainer;\n};\n\n\n/**\n * Creates a single entry and returns it as a DOM container.\n *\n * @param  {Object} entry\n *\n * @return {Object} a DOM container\n */\nPopupMenu.prototype._createEntry = function(entry) {\n\n  if (!entry.id) {\n    throw new Error ('every entry must have the id property set');\n  }\n\n  var entryContainer = domify('<div>'),\n      entryClasses = domClasses(entryContainer);\n\n  entryClasses.add('entry');\n\n  if (entry.className) {\n    entry.className.split(' ').forEach(function(className) {\n      entryClasses.add(className);\n    });\n  }\n\n  domAttr(entryContainer, DATA_REF, entry.id);\n\n  if (entry.label) {\n    var label = domify('<span>');\n    label.textContent = entry.label;\n    entryContainer.appendChild(label);\n  }\n\n  if (entry.imageUrl) {\n    entryContainer.appendChild(domify('<img src=\"' + entry.imageUrl + '\" />'));\n  }\n\n  if (entry.active === true) {\n    entryClasses.add('active');\n  }\n\n  if (entry.disabled === true) {\n    entryClasses.add('disabled');\n  }\n\n  if (entry.title) {\n    entryContainer.title = entry.title;\n  }\n\n  return entryContainer;\n};\n\n\n/**\n * Binds the `close` method to 'contextPad.close' & 'canvas.viewbox.changed'.\n */\nPopupMenu.prototype._bindHandlers = function() {\n\n  var eventBus = this._eventBus,\n      self = this;\n\n  function close() {\n    self.close();\n  }\n\n  eventBus.once('contextPad.close', close);\n  eventBus.once('canvas.viewbox.changing', close);\n  eventBus.once('commandStack.changed', close);\n};\n\n\n/**\n * Unbinds the `close` method to 'contextPad.close' & 'canvas.viewbox.changing'.\n */\nPopupMenu.prototype._unbindHandlers = function() {\n\n  var eventBus = this._eventBus,\n      self = this;\n\n  function close() {\n    self.close();\n  }\n\n  eventBus.off('contextPad.close', close);\n  eventBus.off('canvas.viewbox.changed', close);\n  eventBus.off('commandStack.changed', close);\n};\n\n\n\n// helpers /////////////////////////////\n\nfunction setTransform(element, transform) {\n  element.style['transform-origin'] = 'top left';\n\n  [ '', '-ms-', '-webkit-' ].forEach(function(prefix) {\n    element.style[prefix + 'transform'] = transform;\n  });\n}"]},"metadata":{},"sourceType":"module"}