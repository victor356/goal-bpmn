{"ast":null,"code":"import inherits from 'inherits';\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\nimport { filter } from 'min-dash';\nimport { is } from '../../util/ModelUtil';\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\n\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\ninherits(BpmnEditorActions, EditorActions);\nBpmnEditorActions.$inject = ['injector'];\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\n\nBpmnEditorActions.prototype._registerDefaultActions = function (injector) {\n  // (0) invoke super method\n  EditorActions.prototype._registerDefaultActions.call(this, injector); // (1) retrieve optional components to integrate with\n\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false); // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function () {\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n      var elements = elementRegistry.filter(function (element) {\n        return element !== rootElement;\n      });\n      selection.select(elements);\n      return elements;\n    });\n  }\n\n  if (spaceTool) {\n    this._registerAction('spaceTool', function () {\n      spaceTool.toggle();\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function () {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function () {\n      handTool.toggle();\n    });\n  }\n\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function () {\n      globalConnect.toggle();\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function (opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function (opts) {\n      var currentSelection = selection.get(),\n          aligneableElements = [],\n          type = opts.type;\n\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function (element) {\n          return !is(element, 'bpmn:Lane');\n        });\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n\n  if (selection && modeling) {\n    this._registerAction('setColor', function (opts) {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function () {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n\n  if (searchPad) {\n    this._registerAction('find', function () {\n      searchPad.toggle();\n    });\n  }\n\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function () {\n      var rootElement = canvas.getRootElement(),\n          boundingBox,\n          elements;\n\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function (element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function (element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n\n      boundingBox = getBBox(elements);\n      modeling.moveElements(elements, {\n        x: -boundingBox.x,\n        y: -boundingBox.y\n      }, rootElement);\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/Vittorio/Documents/GitHub/goal-bpmn/frontend/node_modules/bpmn-js/lib/features/editor-actions/BpmnEditorActions.js"],"names":["inherits","EditorActions","filter","is","getBBox","BpmnEditorActions","injector","invoke","$inject","prototype","_registerDefaultActions","call","canvas","get","elementRegistry","selection","spaceTool","lassoTool","handTool","globalConnect","distributeElements","alignElements","directEditing","searchPad","modeling","_registerAction","rootElement","getRootElement","elements","element","select","toggle","opts","currentSelection","type","length","trigger","aligneableElements","setColor","activate","boundingBox","parent","moveElements","x","y"],"mappings":"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","sourcesContent":["import inherits from 'inherits';\n\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\nimport { filter } from 'min-dash';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  getBBox\n} from 'diagram-js/lib/util/Elements';\n\n\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\n\ninherits(BpmnEditorActions, EditorActions);\n\nBpmnEditorActions.$inject = [\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nBpmnEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function() {\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n\n      var elements = elementRegistry.filter(function(element) {\n        return element !== rootElement;\n      });\n\n      selection.select(elements);\n\n      return elements;\n    });\n  }\n\n  if (spaceTool) {\n    this._registerAction('spaceTool', function() {\n      spaceTool.toggle();\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function() {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function() {\n      handTool.toggle();\n    });\n  }\n\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function() {\n      globalConnect.toggle();\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function(opts) {\n      var currentSelection = selection.get(),\n          aligneableElements = [],\n          type = opts.type;\n\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function(element) {\n          return !is(element, 'bpmn:Lane');\n        });\n\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n\n  if (selection && modeling) {\n    this._registerAction('setColor', function(opts) {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function() {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n\n  if (searchPad) {\n    this._registerAction('find', function() {\n      searchPad.toggle();\n    });\n  }\n\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function() {\n      var rootElement = canvas.getRootElement(),\n          boundingBox,\n          elements;\n\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function(element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function(element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n\n      boundingBox = getBBox(elements);\n\n      modeling.moveElements(\n        elements,\n        { x: -boundingBox.x, y: -boundingBox.y },\n        rootElement\n      );\n    });\n  }\n\n};"]},"metadata":{},"sourceType":"module"}